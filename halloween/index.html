<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music Sheet Viewer</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            font-family: Arial, sans-serif;
            background-color: #000;
            background-image: url('images/The Pumpkin King Poster no text.png');
            background-repeat: no-repeat;
            background-size: cover;
            background-position: top center;
            background-attachment: fixed;
        }
        #landing, #viewer {
            height: 100%;
            width: 100%;
            position: absolute;
            top: 0;
            left: 0;
            transition: transform 0.3s ease-in-out;
        }
        #landing {
            background-color: rgba(240, 240, 240, 0.9);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        #viewer {
            background-color: rgba(255, 255, 255, 0.2);
            transform: translateX(100%);
        }
        #viewer.active {
            transform: translateX(0);
        }
        #pdf-container {
            height: 100%;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        #pdf-container img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }
        #hamburger {
            position: fixed;
            top: 20px;
            left: 20px;
            font-size: 30px;
            cursor: pointer;
            z-index: 1000;
        }
        .dropdown {
            position: relative;
            display: inline-block;
        }

        .dropdown-content {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            background-color: #f9f9f9;
            min-width: 200px;
            max-width: 80vw;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
            z-index: 1000;
            max-height: 0;
            overflow-y: auto;
            transition: max-height 0.3s ease-out, opacity 0.3s ease-out;
            opacity: 0;
            scrollbar-width: thin;
            scrollbar-color: #888 #f1f1f1;
        }

        .dropdown-content::-webkit-scrollbar {
            width: 10px;
        }

        .dropdown-content::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        .dropdown-content::-webkit-scrollbar-thumb {
            background: #888;
        }

        .dropdown-content button {
            color: black;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
            width: 100%;
            text-align: left;
            border: none;
            background: none;
            cursor: pointer;
        }

        .dropdown-content button:hover {
            background-color: #f1f1f1;
        }

        .show {
            max-height: 80vh; /* Increased from 300px to 80% of viewport height */
            opacity: 1;
            transition: max-height 0.3s ease-in, opacity 0.3s ease-in;
        }

        @media (min-height: 600px) {
            .show {
                max-height: 500px; /* Fixed height for taller screens */
            }
        }

        @media (min-height: 800px) {
            .show {
                max-height: 700px; /* Even taller for very large screens */
            }
        }

        #select-part {
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            background-color: #f0f0f0;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div id="landing">
        <h1>Select Your Instrument</h1>
        <div class="dropdown">
            <button id="select-part">Select your part</button>
            <div id="instrument-families" class="dropdown-content">
                <!-- Instrument families will be added here dynamically -->
            </div>
        </div>
        <div id="instruments" class="dropdown-content">
            <!-- Individual instruments will be added here dynamically -->
        </div>
    </div>
    <div id="viewer">
        <div id="hamburger">â˜°</div>
        <div id="pdf-container"></div>
    </div>

    <script>
        const landing = document.getElementById('landing');
        const viewer = document.getElementById('viewer');
        const selectPart = document.getElementById('select-part');
        const instrumentFamilies = document.getElementById('instrument-families');
        const instruments = document.getElementById('instruments');
        const pdfContainer = document.getElementById('pdf-container');
        const hamburger = document.getElementById('hamburger');

        // Simulated PDF data (replace with actual PDF data)
        const pdfData = {
            'violin3': [
                'https://via.placeholder.com/800x1000.png?text=Violin+3+Page+1',
                'https://via.placeholder.com/800x1000.png?text=Violin+3+Page+2',
                'https://via.placeholder.com/800x1000.png?text=Violin+3+Page+3'
            ],
            'baritone': [
                'https://via.placeholder.com/800x1000.png?text=Baritone+Page+1',
                'https://via.placeholder.com/800x1000.png?text=Baritone+Page+2'
            ]
        };

        let currentInstrument = '';
        let currentPage = 0;

        const instrumentData = {
            'Woodwinds': ['Piccolo', 'Flute 1', 'Flute 2', 'Oboe (Opt. Fl. 3)', 'Bb Clarinet 1', 'Bb Clarinet 2', 'Bb Clarinet 3', 'Bass Clarinet', 'Alto Saxophone 1', 'Alto Saxophone 2', 'Tenor Saxophone', 'Baritone Saxophone', 'Bassoon'],
            'Brass': ['Bb Trumpet 1', 'Bb Trumpet 2', 'Bb Trumpet 3', 'Bb Trumpet, simplified', 'F Horn 1', 'F Horn 2', 'F Horn 3', 'F Horn 4', 'Trombone 1', 'Trombone 2', 'Trombone 3', 'Euphonium', 'Euphonium, simplified', 'Tuba'],
            'Percussion': ['Percussion 1', 'Aux Percussion', 'Mallets 1', 'Marimba', 'Vibraphone', 'Glockenspiel, Chimes', 'Piano'],
            'Strings': ['Violin 1', 'Violin 2', 'Violin 3', 'Cello 1', 'Cello 2', 'Contrabass']
        };

        function populateInstrumentFamilies() {
            for (let family in instrumentData) {
                const button = document.createElement('button');
                button.textContent = family;
                button.onclick = (e) => {
                    e.stopPropagation();
                    showInstruments(family);
                };
                instrumentFamilies.appendChild(button);
            }
        }

        function showInstruments(family) {
            instruments.innerHTML = '';
            instrumentData[family].forEach(instrument => {
                const button = document.createElement('button');
                button.textContent = instrument;
                button.onclick = (e) => {
                    e.stopPropagation();
                    selectInstrument(instrument);
                };
                instruments.appendChild(button);
            });
            instrumentFamilies.classList.remove('show');
            instruments.classList.add('show');
        }

        function selectInstrument(instrument) {
            selectPart.textContent = instrument;
            instruments.classList.remove('show');
            // Handle the selected instrument (you can reuse your existing logic here)
            console.log('Selected instrument:', instrument);
            currentInstrument = instrument.toLowerCase().replace(/ /g, '_');
            if (currentInstrument) {
                currentPage = 0;
                viewer.classList.add('active');
                showPDF();
            }
        }

        selectPart.onclick = (e) => {
            e.stopPropagation();
            instrumentFamilies.classList.toggle('show');
            instruments.classList.remove('show');
        };

        document.addEventListener('click', () => {
            instrumentFamilies.classList.remove('show');
            instruments.classList.remove('show');
        });

        populateInstrumentFamilies();

        hamburger.addEventListener('click', () => {
            viewer.classList.remove('active');
            selectPart.textContent = 'Select your part';
        });

        function showPDF() {
            if (currentInstrument && pdfData[currentInstrument]) {
                pdfContainer.innerHTML = `<img src="${pdfData[currentInstrument][currentPage]}" alt="Sheet music">`;
            }
        }

        let touchStartX = 0;
        let touchEndX = 0;

        pdfContainer.addEventListener('touchstart', (e) => {
            touchStartX = e.changedTouches[0].screenX;
        });

        pdfContainer.addEventListener('touchend', (e) => {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        });

        function handleSwipe() {
            if (touchEndX < touchStartX) {  // Swipe left to right
                if (currentPage < pdfData[currentInstrument].length - 1) {
                    currentPage++;
                    showPDF();
                }
            }
        }
    </script>
</body>
</html>